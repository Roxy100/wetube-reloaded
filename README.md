# wetube-reloaded

Wetube Clone built using NodeJS, Express, Mongo and ES6 ğŸ’—

### dev script

nodemonì„ ì‹¤í–‰ì‹œí‚¤ê³  íŒŒì¼ì´ ë³€í•  ë•Œë§ˆë‹¤ ì„œë²„ë¥¼ ì¬ì‹œì‘í•´ì£¼ëŠ” nodemonì€ babel-node src/server.jsë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒ.

### dependencies & devDependencies

#### dependencies -> í”„ë¡œì íŠ¸ê°€ ëŒì•„ê°€ê¸° ìœ„í•´ í•„ìš”í•œ packageë“¤

- ì „ì œ node_modules í´ë”ëŠ” ê³µìœ í•  í•„ìš”ê°€ ì—†ë‹¤.
- ê·¸ë˜ì„œ ìœ ì €ê°€ package.jsonì´ ìˆëŠ” ìƒíƒœì—ì„œ npm ië§Œ í•˜ë©´ expressê°€ ì„¤ì¹˜ë¨.
- npmì´ dependencies, devDependenciesë¥¼ ì°¾ì•„ì„œ ëª¨ë“  ê±¸ ìë™ìœ¼ë¡œ ì„¤ì¹˜í•´ì¤Œ.

#### devDependencies -> ê°œë°œìê°€ ê°œë°œí•  ë•Œ í•„ìš”í•œ ê²ƒë“¤.

- ex.nodemon (íŒŒì¼ì„ ë³´ê³  ìˆë‹¤ê°€ ë³€í™”ê°€ ìƒê¸°ë©´ commendë¥¼ ì¬ì‹œì‘í•´ì¤Œ.)
- ex.babel (server.jsë¥¼ babel-nodeë¡œ ëŒë¦¬ê²Œë” ë³€í™˜í•´ì£¼ëŠ” ì—­í• .
  babel-nodeê°€ ì„œë²„ë¥¼ ì‘ë™í•´ì„œ babelì´ ì„¹ì‹œí•œ JavaScriptë¥¼ ì´í•´í•˜ê³ , í‰ë²”í•œ node.jsë°©ì‹ìœ¼ë¡œ ë³€í™˜í•´ì„œ node.js ì„œë²„ë¥¼ ì‘ë™ì‹œí‚¤ëŠ” ì—­í• .)
- babel-nodeë¥¼ ì‚¬ìš©í•˜ë ¤ë©´, bable.config.jsoníŒŒì¼ì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤. babelì— ì¶”ê°€í•˜ê³  ì‹¶ì€ plugin(ìµœì‹  javascriptë¥¼ ì‚¬ìš©í•˜ê²Œ í•´ì£¼ëŠ” ê¸°ëŠ¥)ì„ ë„£ì€ ê²ƒ.

---

---

### Server

- ì„œë²„ë¥¼ ë§Œë“¤ê³  requestsë¥¼ listení•´ì£¼ê¸°ë§Œ í•˜ë©´ ëœë‹¤!!!!! ex. port4000ì„ listeningí•˜ê³  ìˆëŠ” ìƒíƒœì—ì„œ ë³´ë©´ cannot GET / (root page)
  --- ì„œë²„ì— ë˜‘ë˜‘ ë¬¸(routes) ë‘ë“œë¦¬ëŠ” ì¤‘~ ---

- URL(route)ë¥¼ í†µí•´ì„œ requestsë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒ.

<HTTP Method>
GET 
requestì˜ ëœ» --> ë¸Œë¼ìš°ì €ê°€ nico ì„œë²„ë¥¼ í˜¸ì¶œí•˜ë©´, ì„œë²„ê°€ responseë¥¼ ë³´ë‚´ì£¼ëŠ” ê²ƒ. (ìš°ë¦¬ê°€ ë­”ê°€ë¥¼ ìš”ì²­í–ˆê¸° ë•Œë¬¸ì— í˜ì´ì§€ë¥¼ ë°›ì€ ê²ƒì´ë‹¤.)

#### ë¸Œë¼ìš°ì €ëŠ” ì„œë²„ì—ê²Œ í˜ì´ì§€ë¥¼ requestí•˜ëŠ” ê²ƒ!

```
const handleHome = () => console.log("home");
app.get("/", handleHome);
```

-> ì„œë²„ê°€ ì´ requestë¥¼ ë°›ì•„ë“¤ì´ê³ , ë¸Œë¼ìš°ì €ì—ê²Œ "ê·¸ë˜, í™ˆí˜ì´ì§€ë¥¼ ê°€ì ¸ê°€ë„ ì¢‹ì•„!"ë¼ê³  í•˜ê³ , ëˆ„êµ°ê°€ í™ˆí˜ì´ì§€ì— ì˜¤ë ¤ê³  í•˜ë©´ ì„œë²„ëŠ” handleHome í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.

---

### Router

: mini application

#### ë„ë©”ì¸ ë³„ë¡œ ë‚˜ëˆ„ëŠ” ê²ƒì´ í•„ìš”~

#### ë¼ìš°í„°ëŠ” ì‘ì—…ì¤‘ì¸ ì£¼ì œë¥¼ ê¸°ë°˜ìœ¼ë¡œ URLì„ ê·¸ë£¹í™”í•´ì¤€ë‹¤.

#### urlì´ ì–´ë–»ê²Œ ì‹œì‘í•˜ëŠ”ì§€ì— ë”¸ ë‚˜ëˆ„ëŠ” ë°©ë²•.

routerê°€ ì—†ìœ¼ë©´ urlì„ ê°œë³„ë¡œ ê¸¸ê²Œ ê¸¸ê²Œ ëŠ˜ì—¬ì„œ ì“°ëŠ” ë°©ë²•ìœ¼ë¡œ ì½”ë”©ì„ í•´ì•¼ í•˜ëŠ”ë° ê·¸ê²ƒì€ ë§¤ìš° ë¹„íš¨ìœ¨ì ì´ë‹¤.

##### global Router

- / -> Home
- /join -> Join
- /login -> Login
- /search -> Search

##### user Router

- /users/:id -> See User
- /users/logout -> Log Out
- /users/edit -> Edit My Profile
- /users/delete -> Delete(Remove) My Profile

##### video Router

- /videos/:id -> See Video
- /videos/:id/edit -> Edit Video
- /videos/:id/delete -> Delete(Remove) Video
- /videos/upload -> Upload Video

##### more info...

- importí•  ë•Œ ê²½ë¡œì„¤ì • ì‹œ
  "../" : ì§€ê¸ˆ ìˆëŠ” í´ë”ì—ì„œ ë²—ì–´ë‚˜ëŠ” ê±¸ ì˜ë¯¸í•¨.
  "./" : ì§€ê¸ˆì˜ ì¥ì†Œë¥¼ ì˜ë¯¸í•¨.
- export default í•  1ê°œì˜ ê²½ìš°ëŠ” 'export default ê²½ë¡œ';
- export default í•  ì—¬ëŸ¬ ê°œì˜ ê²½ìš°ëŠ” ì—¬ëŸ¬ê°œì˜ í•´ë‹¹í•˜ëŠ” ì½”ë“œ ì•ìª½ì— exportë¥¼ ë„£ëŠ”ë‹¤.
- ê·¸ë¦¬ê³  ë‘ ê°œì˜ ë‹¤ë¥¸ íŒŒì¼ì„ importí•  ë•Œ object{}ë¥¼ ì“´ë‹¤.

#### Router Parameter

- ":id"
  -> id = ë³€ìˆ˜, parameter(ìˆ«ì ê°™ì€ urlì„ ê°€ì§€ëŠ” ê±¸ ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ëŠ” ì—­í• )
  -> : = í…ìŠ¤íŠ¸ê°€ ì•„ë‹ˆë¼ ë³€ìˆ˜ë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ì—­í• .
  expressëŠ” request objectì— ì´ parameterë¥¼ ë³´ë‚´ì¤€ë‹¤.
  ```
  videoRouter.get("/upload", upload);
  videoRouter.get("/:id", see);
  videoRouter.get("/:id/edit", edit);
  ```

---

---

### Pug

#### pugë¼ëŠ” ìœ ì €ê°€ ë³´ì—¬ì¤„ htmlë¡œ ë¦¬í„´í•´ì£¼ëŠ” íŒŒì¼ì´ë‹¤.

- ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•´ì¤„ ê²ƒ!

  ```
  app.set("view engine", "pug");
  app.set("views", process.cwd() + "/src/views")
  ```

#### pugë¼ëŠ” í…œí”Œë¦¿ì— ì–´ëŠ javascript codeë¼ë„ ë„£ì„ ìˆ˜ ìˆë‹¤. ex. footer.pug

#### ê·¸ javascript codeë¥¼ ì‹¤í–‰í•´ì„œ ê·¸ê±¸ ìœ ì €ì—ê²Œ ì œê³µí•´ì£¼ëŠ” ì—­í• ì„ 'ë Œë”ë§'ì´ë¼ê³  ë¶€ë¥¸ë‹¤.

#### ë Œë”ë§í•  ë•Œ ë³´ë‚´ëŠ” ì¸ìˆ˜ëŠ” 2ê°€ì§€ì¸ë°, render("viewì˜ ì´ë¦„", {í…œí”Œë¦¿ì— ë³´ë‚¼ ë³€ìˆ˜} )

- ê¹”ë”í•œ htmlì„ ì‘ì„±í•˜ë„ë¡ í•´ì£¼ê¸° ë•Œë¬¸ì´ë‹¤.
- ìš°ë¦¬ì˜ htmlì— javascriptë¥¼ í¬í•¨ì‹œì¼œì£¼ê¸° ë•Œë¬¸ì´ë‹¤.

#### pugì˜ ë³€ìˆ˜ë¥¼ ì ì„ ë•ŒëŠ” #{} ì´ë¼ê³  ì“´ë‹¤.

#### includes(íŒŒì¼í¬í•¨)

- ë°˜ë³µí•˜ì§€ ì•Šì•„ë„ ë˜ê³  partialsí´ë”ë¥¼ ì‚¬ìš©í•˜ì—¬ í•œ íŒŒì¼ë¡œ ëª¨ë“  í…œí”Œë¦¿ì„ ì—…ë°ì´íŠ¸ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤. ex. include partials/footer.pug

#### inheritance(ìƒì†) with extends and block

- base.pug ê¸°ë³¸ ë² ì´ìŠ¤ì— ë”°ë¼ home, watch, editì€ extends(í™•ì¥) í•˜ê²Œ ë  ê²ƒì„. ex. extends base.pug

- base.pugì— contentë¥¼ ìœ„í•œ ê³µê°„ì´ ë§ˆë ¨ë˜ì–´ì•¼ í•¨. ex. block content
  block: ì°½ë¬¸ ë˜ëŠ” ë¬¸ ì´ë¼ ìƒê°í•˜ì.

---

### MVP styles (Minimal Viable Product.css)

https://andybrewer.github.io/mvp/ ì‚¬ìš©í•´ì„œ base.pugì— ë„£ëŠ”ë‹¤.

- ê½¤ ê´œì°®ì€ ìŠ¤íƒ€ì¼ë“¤ì„ HTML íƒœê·¸ì— ì…íˆëŠ” ì—­í• ì„ í•¨.

### Conditionals & Iteration & Mixin

- Conditional : ì¡°ê±´ë¬¸ ì‚¬ìš©í•´ë³´ê¸°
- Iteration: listì˜ ëª¨ë“  elementë“¤ì„ HTMLì— ë³´ì—¬ì£¼ëŠ” ê²ƒ.
  -> arrayì˜ ëª¨ë“  elementì— ëŒ€í•´ íŠ¹ì • í–‰ë™ì„ ì·¨í•  ë•Œ ì‚¬ìš©í•¨.
- mixin: ë‹¤ë¥¸ ë°ì´í„°ë¥¼ í¬í•¨í•˜ì§€ë§Œ ê°™ì€ í˜•íƒœì˜ HTMLì„ ë³´ì—¬ì£¼ëŠ” ê²ƒ.
  - footer.pugëŠ” partialë¥¼ ì‚¬ìš©í•œ ì´ìœ ì™€ ê°™ì§€ë§Œ, ì´ ë¶€ë¶„ì€ ë³´ì—¬ì£¼ëŠ” ìš©ë„ë¡œ ì“°ì¼ ë¿ì´ë‹¤.
  - video.pugëŠ” mixinì„ ì‚¬ìš©í•˜ì—¬, ë³´ì—¬ì¤„ ë¿ë§Œ ì•„ë‹ˆë¼ ë°ì´í„°ë„ ë°›ì„ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ê¹Œì§€ ì¶”ê°€í•œ ì´ìœ ì´ë‹¤. '+' ì‚¬ìš©!
    -> ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” ì¼ì¢…ì˜ ë¯¸ë¦¬ ë§Œë“¤ì–´ì§„ Html blockì´ë¼ ë³¼ ìˆ˜ ìˆë‹¤. Htmlì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥.
- partialì™€ mixinì€ templateì— include í•´ì¤˜ì•¼í•œë‹¤.

---

---

### GET & POST

- GET : ê°€ì ¸ì˜¨ë‹¤!
- POST : ìˆ˜í–‰í•œë‹¤!
- redirect : ë‹¤ì‹œë³´ë‚´ë‹¤
- parameter : ë§¤ê°œë³€ìˆ˜

* expressëŠ” formìœ¼ë¡œ ë³´ë‚¸ ë°ì´í„°ë¥¼ ì½ì§€ ëª»í•œë‹¤.
* inputì— nameì„¤ì •ì„ í•´ì£¼ì§€ ì•Šìœ¼ë©´ ë°ì´í„°ê°€ ì „ì†¡ë˜ì§€ ì•ŠëŠ”ë‹¤!!!

### MongoDB & Mongoose

1. wsl í„°ë¯¸ë„ì„ ì—°ë‹¤.
2. 'sudo apt update'ì„ ì…ë ¥í•˜ê³ ,
3. 'sudo apt-get install mongodb'ì„ ì…ë ¥í•˜ê³  ì„¤ì¹˜í•œë‹¤.
4. 'mongod --version'ì„ ì…ë ¥í•˜ê³  ì„¤ì¹˜ê°€ ë˜ì–´ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.
5. ë°˜ë“œì‹œ ëª½ê³ ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì„œë¹„ìŠ¤ ì‹œì‘!
   > sudo service mongodb start
6. ëª½ê³  ì‚¬ìš©í•˜ê¸°

   > mongo

7. ë‚´ê°€ ê°€ì§„ db ë³´ê¸°

   > show dbs

8. í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ db í™•ì¸

   > db

9. ì‚¬ìš©í•  db ì„ íƒí•˜ê¸°

   > use dbName
   > (í˜„ì¬ ìˆ˜ì—…ì—ì„œëŠ” `use wetube`)

10. db ì»¬ë ‰ì…˜ ë³´ê¸°

    > show collections

11. db ì»¬ë ‰ì…˜ ì•ˆì— documents ë³´ê¸°

    > db.collectionName.find()
    > (í˜„ì¬ ìˆ˜ì—…ì—ì„œëŠ” `db.videos.find()`)

12. db ì»¬ë ‰ì…˜ ì•ˆì— documents ëª¨ë‘ ì œê±°í•˜ê¸°
    > db.collectionName.remove({})
    > (í˜„ì¬ ìˆ˜ì—…ì—ì„œëŠ” `db.videos.remove({})`)
13. ë‹¤ ì‚¬ìš©í–ˆìœ¼ë©´ ì„œë¹„ìŠ¤ë¥¼ ì¢…ë£Œ!

    > sudo service mongodb stop

14. ì§€ê¸ˆ ì„œë¹„ìŠ¤ê°€ ì‹¤í–‰ì¤‘ì¸ì§€ ì•Œ ìˆ˜ ìˆë‹¤.
    > sudo service mongodb status
    - ([OK] or not [Fail])

- CRUD -> Create / Read / Update / Delete

### Callbackì‹ vs Promiseì‹

- Callbackì‹ìœ¼ë¡œ í•˜ë©´,

```
console.log("start")   // ì²«ë²ˆì§¸ ìˆœì„œ,
Video.find({}, (error, videos) => {
  if(error) {
    return res.render("server-error")
  }
  return res.render("home", { pageTitle: "Home", videos });
});  // ì„¸ë²ˆì§¸ ìˆœì„œ
console.log("finished")   // ë‘ë²ˆì§¸ ìˆœì„œ,
```

- Promiseì‹ìœ¼ë¡œ í•˜ë©´,

```
export const home = async (req, res) => {
  try {
    const videos = await Video.find({});  // awaitì‚¬ìš© ë•Œë¬¸ì— ì´ ì½”ë“œë¶€í„° ì°¨ë¡€ëŒ€ë¡œ ì‹¤í–‰ë¨.
    return res.render("home", { pageTitle: "Home", videos });
  } catch {
    return res.render("server-error");
  }
};
```

-> awaitì‚¬ìš©ì‹œ í•´ë‹¹í•¨ìˆ˜ê°€ asyncì¼ ë•Œë§Œ ê°€ëŠ¥í•˜ë‹¤.

#### return & render

1. returnì˜ ì—­í•  : ë³¸ì§ˆì ì¸ returnì˜ ì—­í• ë³´ë‹¤ëŠ” functionì„ ë§ˆë¬´ë¦¬ì§“ëŠ” ì—­í• ë¡œ ì‚¬ìš©ë˜ê³  ìˆìŒ.

- ì´ëŸ¬í•œ ê²½ìš° returnì´ ì—†ì–´ë„ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì§€ë§Œ ì‹¤ìˆ˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ returnì„ ì‚¬ìš©.

2. renderí•œ ê²ƒì€ ë‹¤ì‹œ renderí•  ìˆ˜ ì—†ë‹¤.

- redirect(). sendStatus(). end() ë“±ë“± í¬í•¨ (expressì—ì„œ ì˜¤ë¥˜ ë°œìƒí•˜ê¸° ë•Œë¬¸)

### More...

- Model.findByIdAndUpdate()ë¡œ ë¶ˆëŸ¬ì˜¤ê¸°ì™€ ìˆ˜ì •ì„ í•œë°©ì—~
- Model.exists(idë¥¼ ì ìš©í•˜ëŠ” ì½”ë“œ) --- ex.Video.exists({\_id: id})
- ìƒì„±ì´ë‚˜ ì—…ë°ì´íŠ¸ ì „ ì‘ë™í•´ì•¼ í•  functionì˜ í•„ìš”ì„± => Mongooseì˜ Middlewareë¥¼ í™œìš©í•œë‹¤.

- Model.findOneAndDelete() >> Model.findOneAndRemove() deleteë¥¼ ì‚¬ìš©í•  ê²ƒ!
- ìœ„ í‘œí˜„ì„ ì¤„ì¸ ê²ƒì´ : Model.findByIdAndDelete()

- ì •ê·œì‹ í‘œí˜„ regular expression

  - ì—°ìŠµì‚¬ì´íŠ¸ : https://regex101.com/
  - MDN ê³µì‹ ë¬¸ì„œ : https://developer.mozilla.org/ko/docs/Web/JavaScript/Guide/Regular_Expressions
  - ì •ê·œí‘œí˜„ì‹ ì£¼ìš”ì‚¬ìš© : https://www.regexpal.com
  - ëª½ê³ db regex : https://docs.mongodb.com/manual/reference/operator/query/regex
  - RegExp Mdn : https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/RegExp

  - ì˜ˆì‹œ ì½”ë“œ

  ```
  $regex: new RegExp(`keyword`, "i")  -> keyword ë‹¨ì–´í¬í•¨.
  $regex: new RegExp(`^${keyword}`, "i")  -> keywordë¡œ ì‹œì‘í•˜ëŠ” ê²ƒë§Œ.
  $regex: new RegExp(`${keyword}$`, "i")  -> keywordë¡œ ëë‚˜ëŠ” ê²ƒë§Œ.
  ```

- req.params : video linkë¥¼ í´ë¦­í•˜ë©´ urlì— idë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.
- req.body : formì„ ë³´ë‚´ë©´ ê·¸ ë‚´ìš©ì„ req.bodyë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.
- req.query : search í™”ë©´ì—ì„œ keywordë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤. ì¦‰, URLì— ìˆëŠ” ëª¨ë“  ì •ë³´ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

---

### ìƒíƒœì½”ë“œ Status Code

[ìƒíƒœì½”ë“œ]
https://ko.wikipedia.org/wiki/HTTP_%EC%83%81%ED%83%9C_%EC%BD%94%EB%93%9C

- 200(OK): ì„œë²„ê°€ ìš”ì²­ì„ ì œëŒ€ë¡œ ì²˜ë¦¬í–ˆë‹¤ëŠ” ëœ»ì´ë‹¤. ì´ëŠ” ì£¼ë¡œ ì„œë²„ê°€ ìš”ì²­í•œ í˜ì´ì§€ë¥¼ ì œê³µí–ˆë‹¤ëŠ” ì˜ë¯¸ë¡œ ì“°ì¸ë‹¤.
- 400(Bad Request): ì„œë²„ê°€ ìš”ì²­ì˜ êµ¬ë¬¸ì„ ì¸ì‹í•˜ì§€ ëª»í•  ë•Œ ë°œìƒí•œë‹¤. í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ë¬¸ì œê°€ ìˆì„ ë•Œ ì£¼ë¡œ ë°œìƒí•œë‹¤.
- 404(Not Found): ì„œë²„ê°€ ìš”ì²­í•œ í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì„ ë•Œ ë°œìƒí•œë‹¤. ì„œë²„ì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í˜ì´ì§€ì— ëŒ€í•œ ìš”ì²­ì´ ìˆì„ ê²½ìš° ì„œë²„ëŠ” ì´ ì½”ë“œë¥¼ ì œê³µí•œë‹¤.

---

### ì„¸ì…˜ê³¼ ì¿ í‚¤ Sessions and Cookies

- Cookie ì¿ í‚¤ :
  1. ì •ë³´ë¥¼ ì£¼ê³  ë°›ëŠ” ë°©ë²•!
  2. **ì„¸ì…˜ IDë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ë§¤ê²Œì²´!**
  3. **ì„œë²„ê°€ ë¸Œë¼ìš°ì €ì— ë°ì´í„°ë¥¼ ì£¼ëŠ” ì •ë³´. ì„¸ì…˜ idë¥¼ ë„£ì„ ê³³. Only ë¸Œë¼ìš°ì €!!!**
  4. ì¿ í‚¤ëŠ” ì¸ì¦ ë¿ë§Œ ì•„ë‹ˆë¼ ì—¬ëŸ¬ê°€ì§€ ì •ë³´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.
  5. ì¿ í‚¤ëŠ” ë„ë©”ì¸ì— ë”°ë¼ ì œí•œì´ ë˜ê³ , ìœ íš¨ê¸°ê°„ì´ ìˆë‹¤.
- Session ID ì„¸ì…˜ ID:
  1. ì¿ í‚¤ì— ì €ì¥ëœë‹¤.
  2. ì„œë²„(ì„¸ì…˜DB)ì—ë„ ì €ì¥ëœë‹¤.
  3. _í˜„ì¬ ë¡œê·¸ì¸í•œ ìœ ì €ë“¤ì˜ ëª¨ë“  ì„¸ì…˜ IDë¥¼ ì„¸ì…˜DBì— ì €ì¥í•´ì•¼ í•œë‹¤._
  4. _ì¦‰, ìš”ì²­ì´ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤, ì„œë²„ëŠ” ì¿ í‚¤ë¥¼ ë°›ì•„ì„œ, ì„¸ì…˜IDë¥¼ ë³´ê³  ì„¸ì…˜ IDì™€ ì¼ì¹˜í•˜ëŠ” ìœ ì €ë¥¼ ì°¾ì•„ì•¼ í•˜ê³ , ì¿ í‚¤ì•ˆì˜ ì„¸ì…˜IDì™€ ìœ ì €ê°€ ì¼ì¹˜í•˜ê²Œ ëœë‹¤._
  5. **ì„¸ì…˜ì—ì„ , ì„¸ì…˜IDë§Œ ì£¼ë©´ ëœë‹¤. ì„¸ì…˜ì— ëŒ€í•œ ëª¨ë“  ì •ë³´ëŠ” ì„¸ì…˜DBì— ì €ì¥ë˜ì–´ìˆë‹¤.**
  6. **í˜ì´ì§€ë¥¼ ìš”ì²­í•˜ë©´, ì„œë²„ëŠ” ì„¸ì…˜IDë¥¼ DBì—ì„œ ì°¾ìœ¼ë©´ ëœë‹¤!!!**
- Token í† í° :
  1. **ì„œë²„ê°€ ê¸°ì–µí•˜ëŠ” ì´ìƒí•˜ê²Œ ìƒê¸´ String!**
  2. ID ì¹´ë“œ ì²˜ëŸ¼ ì„œë²„ì—ê²Œ ë³´ì—¬ì¤˜ì•¼ í•œë‹¤.
- JWT :
  1. ì •ë³´ë¥¼ ê°–ê³ ìˆëŠ” í† í° í˜•ì‹. ex. QR ì²´í¬ì¸.
  2. ì•”í˜¸í™” ë˜ì§€ ì•Šì•„ì„œ ëˆ„êµ¬ë‚˜ ì—´ì–´ì„œ í•´ë‹¹ ì»¨í…ì¸ ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.
  3. DB ì—†ì´ ê²€ì¦í•  ìˆ˜ ìˆë‹¤.
  4. _ì„œë²„ëŠ” ìœ ì €ì˜ IDë¥¼ ê°€ì ¸ë‹¤ê°€, 'sign ì•Œê³ ë¦¬ì¦˜'ì„ ì´ìš©í•´ì„œ 'sign'ì„ í•œë‹¤._
  5. _í•´ë‹¹ signëœ ì •ë³´ë¥¼ stringí˜•íƒœë¡œ ë³´ë‚¸ë‹¤. (ì„¸ì…˜IDë³´ë‹¤ ê¸¸ë‹¤.)_
  6. _ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ë ¤ë©´, í•´ë‹¹ 'sign info' or 'Token'ì„ ì„œë²„ì— ë³´ë‚´ì•¼ í•œë‹¤._
  7. _ì„œë²„ëŠ” Tokenì„ ë°›ìœ¼ë©´, í•´ë‹¹ signì´ ìœ íš¨í•œì§€ ì²´í¬í•˜ê²Œ ë˜ë©´, Userë¡œ ì¸ì¦í•˜ê²Œ ë  ê²ƒì´ë‹¤._
  8. **ì„œë²„ëŠ” ìœ ì €ë¥¼ ì¸ì¦í•˜ëŠ”ë° í•„ìš”í•œ ì •ë³´ë¥¼ Tokenì— ì €ì¥í•œë‹¤. í•´ë‹¹ Tokenì„ Userì—ê²Œ ì¤€ë‹¤.**
  9. **í˜ì´ì§€ë¥¼ ìš”ì²­í•˜ë©´, ì„œë²„ëŠ” í•´ë‹¹ Tokenì´ ìœ íš¨í•œì§€ ê²€ì¦í•˜ë©´ ëœë‹¤!!!**

* ì¿ í‚¤ë¥¼ ì‚¬ìš©í•´ì„œ ì–´ë–¤ ë¸Œë¼ìš°ì €ë¥¼ ìœ„í•œ ì„¸ì…˜ IDì¸ì§€ ì•Œ ìˆ˜ ìˆë‹¤.
* ë¸Œë¼ìš°ì €ë§ˆë‹¤ req.sessionì´ ë‹¬ë¼ì„œ ëª‡ëª‡ ì •ë³´ë¥¼ req.session objectì— ë§ë¶™ì¸ ê²ƒì´ë‹¤.
  ```
  req.session.loggedIn = true;
  req.session.user = user;
  ```

#### ì¤‘ìš”

**ì„œë²„ê°€ ë¸Œë¼ìš°ì €í•œí…Œ ì„¸ì…˜ idë¥¼ ì£¼ê³ , ë¸Œë¼ìš°ì €ê°€ ìš”ì²­ì„ ë³´ë‚¼ ë•Œë§ˆë‹¤ ì¿ í‚¤ì—ì„œ ì„¸ì…˜ idë¥¼ ê°€ì ¸ì™€ ë³´ë‚´ì¤€ë‹¤.**
**ì„œë²„ê°€ ê·¸ ì„¸ì…˜idë¥¼ ì½ê³  ê·¸ ìœ ì €ê°€ ëˆ„êµ°ì§€ ì•Œ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.**

1. ë¸Œë¼ìš°ì €ì—ì„œ ì›¹ì‚¬ì´íŠ¸ë¥¼ ë°©ë¬¸í•  ë•Œë§ˆë‹¤ express-session middlewareì´ ìˆìœ¼ë©´,
2. expressê°€ ì•Œì•„ì„œ ê·¸ ë¸Œë¼ìš°ì €ë¥¼ ìœ„í•œ ì„¸ì…˜ idë¥¼ ë§Œë“¤ê³  ë¸Œë¼ìš°ì €í•œí…Œ ë³´ë‚´ì¤€ë‹¤.
3. ë¸Œë¼ìš°ì €ê°€ ì¿ í‚¤ì— ê·¸ ì„¸ì…˜ idë¥¼ ì €ì¥í•˜ê³  expressì—ì„œë„ ê·¸ ì„¸ì…˜ì„ ì„¸ì…˜ DBì— ì €ì¥ëœë‹¤.

- ì„¸ì…˜ DBì— ìˆëŠ” id === ì¿ í‚¤ì— ìˆëŠ” id

4. ë¸Œë¼ìš°ì €í•œí…Œ ë³´ë‚´ì„œ ì¿ í‚¤ì— ì €ì¥í•œ ì„¸ì…˜ idë¥¼ ë¸Œë¼ìš°ì €ê°€ localhost:4000ì˜ ëª¨ë“  URLì— ìš”ì²­ì„ ë³´ë‚¼ ë•Œë§ˆë‹¤ ì„¸ì…˜ idë¥¼ ìš”ì²­ê³¼ í•¨ê»˜ ë³´ë‚¸ë‹¤.
5. ì„œë²„ì—ì„œ ì–´ë–¤ ìœ ì €ê°€, ì–´ë–¤ ë¸Œë¼ìš°ì €ì—ì„œ ìš”ì²­ì„ ë³´ëƒˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.

- ì„œë²„ê°€ ì„¸ì…˜ì„ ìƒì„±í•˜ëŠ” ê¸°ì ì€ middlewareë¡œ express-sessionì„ ì¶”ê°€ì„¤ì¹˜í•  ë•Œ ìƒì„±ë¨.
- req.sessionStore() ì‚¬ìš©í–ˆì„ ë•Œ í•œë²ˆì€ undefinedê°€ ë‚˜ì˜¨ ì´ìœ 
  --> ì„¸ì…˜ì€ ì„œë²„ì—ì„œ ë§Œë“¤ì–´ì¤˜ì•¼ í•˜ëŠ”ë° í´ë¼ì´ì–¸íŠ¸ê°€ ì²« ìš”ì²­ ë•Œ ì„¸ì…˜ì„ ê°€ì§€ê³  ìˆì„ë¦¬ê°€ ì—†ë‹¤.
- ì²« ìš”ì²­ ê·¸ ì´í›„ë¶€í„° ì²«ë²ˆì§¸ ìš”ì²­ ë•Œ ì„¸ì…˜ì„ ë§Œë“¤ì–´ì„œ ë„˜ê²¼ìœ¼ë‹ˆ í´ë¼ì´ì–¸íŠ¸ê°€ í•´ë‹¹ ê°’ì„ ì¿ í‚¤ì— ì €ì¥í•˜ê³  ë§¤ ìš”ì²­ë•Œë§ˆë‹¤ ì„œë²„ì—ê²Œ ì „ë‹¬í•œë‹¤.
- ì„¸ì…˜ì€ ì„œë²„ê°€ ë§Œë“¤ì–´ì„œ ì œê³µí•´ì£¼ëŠ” ì—­í• ì´ë¼ ì„œë²„ê°€ ì¬ë¶€íŒ…ë˜ë©´ ì´ˆê¸°í™”ëœë‹¤. --> ê·¸ë˜ì„œ DBì— ì €ì¥í•´ì„œ ê´€ë¦¬ë¥¼ í•˜ëŠ” ê²ƒì´ë‹¤.
- ì„¸ì…˜ì˜ ê°’ì€ ì„œë²„ê°€ ë§Œë“¤ì–´ì£¼ëŠ” ê³ ìœ ê°’ì´ë‹¤ë³´ë‹ˆ í•´ë‹¹ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìš”ì²­í•œ ê±´ì— ëŒ€í•´ ìœ ì €ë¥¼ íŠ¹ì •ì§€ì„ ìˆ˜ ìˆë‹¤.

**ì¦‰, ë¸Œë¼ìš°ì €ì—ì„œ ì„œë²„ì— ë¡œê·¸ì¸ ìš”ì²­ì„ í•´ì„œ ë¡œê·¸ì¸ì´ ë˜ë©´ ì„œë²„ëŠ” ì„¸ì…˜idë¥¼ ì‘ë‹µí•´ì£¼ê³  ë¸Œë¼ìš°ì €ëŠ” ì¿ í‚¤Storageì— ê·¸ ì„¸ì…˜idë¥¼ ë³´ê´€í•˜ê³  ìˆë‹¤ê°€ ê·¸ ì´í›„ ë‹¤ì‹œ ì„œë²„ì— ë°©ë¬¸í•  ì‹œì—ëŠ” ê·¸ ì„¸ì…˜idë§Œ ë³´ì—¬ì£¼ë©´ ìë™ìœ¼ë¡œ ë¡œê·¸ì¸ë˜ê²Œ í•´ì¤˜ì„œ ê³„ì† ë¡œê·¸ì¸í•  ìˆ˜ê³ ë¥¼ ëœì–´ì¤€ë‹¤ëŠ” ëœ».**

#### ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë¿ë§Œ ì•„ë‹ˆë¼, ê°€ì§œ ì‚¬ìš©ì(ë´‡)ì—ê²Œë„ ì¿ í‚¤ë¥¼ ì¤„ ìˆ˜ ìˆëŠ” ì„¤ì •.

- resave: ture
- saveUninitialized: true

#### ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì—ê²Œë§Œ ì¿ í‚¤ë¥¼ ì¤„ ìˆ˜ ìˆëŠ” ì„¤ì •.

- resave: false
- saveUninitialized: false

#### ì¿ í‚¤ì˜ í”„ë¡œí¼í‹° & í™˜ê²½ë³€ìˆ˜ ì„¤ì •

- secret : cookieì— signí•  ë•Œ ì‚¬ìš©í•˜ëŠ” string.
  - signí•˜ëŠ” ì´ìœ : ì„œë²„ê°€ cookieë¥¼ ì¤¬ë‹¤ëŠ” ê±¸ ë³´ì—¬ì£¼ê¸° ìœ„í•¨. ì¸ì¦í‘œì‹œ.
- Domain : cookieë¥¼ ë§Œë“  ì„œë²„ê°€ ëˆ„êµ¬ì¸ê°€?? ë¸Œë¼ìš°ì €ëŠ” domainì— ë”°ë¼ ì„œë²„ë¥¼ ì „ì†¡í•œë‹¤.
- Path : URL
- Expires : ë§Œë£Œë‚ ì§œë¥¼ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ 'session' cookieë¡œ ì„¤ì •ë¨.
  - ì‚¬ìš©ìê°€ í”„ë¡œê·¸ë¨ì„ ë‹«ìœ¼ë©´ session cookieëŠ” ì‚¬ë¼ì§€ê±°ë‚˜, ì»´í„° ì¬ì‹œì‘í•˜ë©´ sessionì´ ì‚¬ë¼ì§€ê²Œ ë¨.
- Max-age : sessionì´ ì–¸ì œ ë§Œë£Œë˜ëŠ”ì§€ ì•Œë ¤ì£¼ëŠ” ê²ƒ.
  ```
  cookie: {
    maxAge: 20000,
  },
  ```
- .env íŒŒì¼ì—ëŠ” ì½”ë“œì— ë“¤ì–´ê°€ë©´ ì•ˆë˜ëŠ” ê°’ë“¤ì„ ì¶”ê°€í•  ê²ƒ. (ë‹¨, ëª¨ë“  ê±´ ëŒ€ë¬¸ìë¡œ ì ì–´ì•¼ í•  ê²ƒ!) ex. ëª¨ë“  API key or ëª¨ë“  ë¹„ë°€ë¡œ í•´ì•¼í•˜ëŠ” URL.
  1. env íŒŒì¼ ë§Œë“¤ê¸°
  2. env íŒŒì¼ì„ .gitignoreì— ì¶”ê°€í•˜ê¸°
  3. ë¹„ë°€ë¡œ í•´ì•¼í•˜ëŠ” stringì„ process.env.(í™˜ê²½ë³€ìˆ˜)ë¡œ ë°”ê¾¸ê¸°

---

#### ì†Œì…œ ë¡œê·¸ì¸ ë§Œë“œëŠ” ë²• (Github)

1. https://github.com/settings/applications/new ì—¬ê¸°ë¡œ ê°€ì„œ ì„¤ì •ì„ í•´ì¤€ë‹¤.
2. Githubì— Userë¥¼ ë³´ë‚¸ë‹¤. --> https://github.com/login/oauth/authorize?client_id=ì…ë ¥ê°’
3. URLì— ìˆëŠ” ê²ƒë“¤ì„ ë°”ê¿ˆìœ¼ë¡œì¨ ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ Userë¥¼ ìŠ¹ì¸í•  ìˆ˜ ìˆë‹¤. --> https://github.com/login/oauth/authorize?client_id=ì…ë ¥ê°’&allow_signup=false&scope

- scope : ìœ ì €ì—ê²Œì„œ ì–¼ë§ˆë‚˜ ë§ì´ ì •ë³´ë¥¼ ì½ì–´ë‚´ê³  ì–´ë–¤ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ê²ƒì— ëŒ€í•œ ê²ƒ.

4. Userê°€ Githubì—ì„œ "ì˜ˆ"ë¼ê³  í•˜ë©´ GithubëŠ” codeê°’ì„ ì¤„ ê²ƒì„.
5. ê·¸ codeê°’ì„ ê°€ì§€ê³  access_tokenìœ¼ë¡œ ë°”ê¾¼ë‹¤.
6. ê·¸ access_tokenìœ¼ë¡œ Github APIë¥¼ ì‚¬ìš©í•´ User ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ê²ƒì„.
7. ì´ GET URLì„ í†µí•´ì„œ ì¸ì¦ì„ ìœ„í•œ access_tokenì„ ë³´ë‚´ì¤˜ì•¼ í•œë‹¤.

---

---

---

### Webpack

- ì•ì„œ ë§Œë“  JSì½”ë“œë“¤ì€ Babel Node.jsì—ì„œ ë³€í™˜ì‹œì¼œì£¼ëŠ” ê²ƒë“¤ì´ì Backend Partì´ì§€ë§Œ,
- Webpack ì—ì„œëŠ” ì´ì œë¶€í„° ë¸Œë¼ìš°ì €ì—ì„œ ì‘ì„±í•  ìˆ˜ ìˆê²Œ ë³€í™”ì‹œì¼œì£¼ëŠ” ê²ƒì´ì Frontend Partì´ë‹¤.

#### devDependencies ë¡œ ì„¤ì¹˜

> npm i webpack webpack-cli -D

#### Webpack --- script ì„¤ì •

> "assets": "webpack --config webpack.config.js"

#### í•„ìˆ˜ ì„¤ì •

- entry: ì†ŒìŠ¤ì½”ë“œì´ì, ìš°ë¦¬ê°€ ì²˜ë¦¬í•˜ê³ ì í•˜ëŠ” íŒŒì¼ë“¤(ì˜ˆìœ js)
- entry: ì´ í”„ë¡œí¼í‹°ì— ìš°ë¦¬ê°€ ì²˜ë¦¬í•˜ê³ ì í•˜ëŠ” íŒŒì¼ì˜ ê²½ë¡œ ì…ë ¥
- output: ì‘ì—…ì´ ëë‚œ ê²°ê³¼ë¬¼
- filename: ì´ í”„ë¡œí¼í‹°ì— ìš°ë¦¬ ê²°ê³¼ë¬¼ì´ ë  íŒŒì¼ ì´ë¦„ ì…ë ¥
- path: ì´ í”„ë¡œí¼í‹°ì— ìš°ë¦¬ ê²°ê³¼ë¬¼ íŒŒì¼ì„ ì–´ë””ì— ì €ì¥í•  ì§€ ì§€ì • (ì´ ê²½ë¡œëŠ” ì ˆëŒ€ê²½ë¡œì—¬ì•¼ í•´!)
- dirname: directory name íŒŒì¼ê¹Œì§€ì˜ ê²½ë¡œ ì „ì²´
- resolve: ê²½ë¡œì¶”ê°€
- mode: ê¸°ë³¸ì„¤ì •ì´ production modeë¡œ ì„¤ì •ë˜ê¸° ë•Œë¬¸ì— 'ê°œë°œëª¨ë“œ ì¤‘'ìœ¼ë¡œ ì„¤ì •í•˜ê¸° ìœ„í•´ì„œ, development ì¶”ê°€í•  ê²ƒ!
- watch: true í•˜ê²Œ ë˜ë©´, Client íŒŒì¼ í™•ì¸ì„ ìœ„í•´, ë‘˜ì§¸ëŠ” Backend íŒŒì¼ í™•ì¸ì„ í•˜ê¸° ìœ„í•´ì„œ, ì´ ë‘˜ ëª¨ë‘ ë™ì‹œì— ì‹¤í–‰ë˜ì–´ì•¼ë§Œ í•œë‹¤.
- clean: true í•˜ê²Œ ë˜ë©´, output folderë¥¼ buildë¥¼ ì‹œì‘í•˜ê¸° ì „ì— clean í•´ì£¼ëŠ” ê²ƒ!

> ì•„ë˜ ì½”ë“œë“¤ ì¤‘ìš”~ ì„¤ì •í•´ì•¼ í•˜ëŠ” êµ¬ì¡° íŒŒì•…í•˜ê¸°!

```
const path = require("path");
module.exports = {
  entry: "./src/client/js/main.js",
  mode: "development",
  watch: true,
  output: {
    filename: "main.js",
    path: path.resolve(__dirname, "assets", "js"),
    clean: true,
  },
  module: {
    rules: [
      {
        test: /\.js$/,
        use: { },
        },
      },
    ],
  },
};
```

- client/js/main.js : (webpackí•˜ê¸° ì „) ìµœì‹ ì˜ ì„¸ë ¨ëœ ì½”ë“œë¥¼ ì§œëŠ” ê³µê°„.
- assets/js/main.js : (webpack í•œ í›„) ë³€í™˜í•´ì£¼ëŠ” ì½”ë“œë“¤.
- base.pugëŠ” assets í´ë”ì—ì„œë¶€í„° íŒŒì¼ë“¤ì„ ë¶ˆëŸ¬ì˜¬ ê²ƒì„. ì£¼ì†Œê²½ë¡œëŠ” /static/ URL ì´ ë  ê²ƒì„.

---

#### SCSS Loader

> npm i sass-loader sass webpack --save-dev
> npm i --save-dev css-loader
> npm i --save-dev style-loader

```
      {
        test: /\.scss$/,
        use: ["style-loader", "css-loader", "sass-loader"],
      },
```

- Webpackì´ ì í˜€ì ¸ìˆëŠ” ì—­ìˆœìœ¼ë¡œ ì‹¤í–‰ë¨.
  sass-loader > css-loader > style-loader ìˆœìœ¼ë¡œ
  - sass-loader : scssë¥¼ ì¼ë°˜ì ì¸ cssë¡œ ë°”ê¿”ì¤Œ.
  - style-loader : css codeë¥¼ ë¸Œë¼ìš°ì €ì— ì ìš©í•˜ëŠ” ì—­í• .

#### MiniCssExtractPlugin

style-loaderë¥¼ ì´ìš©í•˜ëŠ” ëŒ€ì‹ ì—, ì´ Pluginì„ ì‚¬ìš©í•˜ì—¬, css íŒŒì¼ì„ ë¶„ë¦¬í•˜ê³  ì‹¶ê¸° ë•Œë¬¸ì—

> npm i --save-dev mini-css-extract-plugin

### Styles

- font-awesome ì„¤ì • : https://cdnjs.com/libraries/font-awesome
- Reset ì„¤ì • : https://meyerweb.com/eric/tools/css/reset/

---

---

### Video Player making~~~

#### Time Formatting

íƒ€ì„ í¬ë§·í•  ë•Œ ì“°ëŠ” JS ì†ì„ìˆ˜ë¡œ ì“°ì´ëŠ” í•¨ìˆ˜.

```
new Date(5*1000)
Thu Jan 01 1970 09:00:05 GMT+0900 (í•œêµ­ í‘œì¤€ì‹œ)
new Date(5*1000).toISOString()
'1970-01-01T00:00:05.000Z'
new Date(5*1000).toISOString().substr(11,8)
'00:00:05'
```

#### Etc ì´ë²¤íŠ¸ í•¨ìˆ˜

- input event ëŠ” í´ë¦­í•˜ê³  ì´ë™í–ˆì„ ë•Œ ì¼ì–´ë‚˜ëŠ” ì´ë²¤íŠ¸ í•¨ìˆ˜ì´ë‹¤.

---

### Views API

#### Status() / Sendstatus()

- Status() : render()í•˜ê¸° ì „ì— ìƒíƒœ ì½”ë“œë¥¼ ì •í•  ìˆ˜ ìˆëŠ” ê²ƒ.

  ```
  return res.status(400).render();
  ```

- Sendstatus() : ìƒíƒœ ì½”ë“œë¥¼ ë³´ë‚´ê³  ì—°ê²°ì„ ëë‚´ëŠ” ê²ƒ!

  ```
  return res.sendStatus(404);
  ```

---

---

### Webassembly Video Transcode

- FFmpeg.wasm : ë¹„ë””ì˜¤ë¥¼ ë³€í™˜í•˜ê¸° ìœ„í•´ ì‚¬ìš©ìì˜ ì»´í“¨í„°ë¥¼ ì‚¬ìš©í•¨.
